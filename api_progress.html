---
layout: main
menu: API progress
title: API porting progress
css: [api]
sub: An overview of ported and to be ported methods and modules.
---

<div class="row">
  <div class="span3 sidebar">
    <div class="sidenav" data-spy="affix" data-offset-top="240">
      <h4>View</h4>
      <div class="btn-group" data-toggle="buttons-radio" id="filter">
        <button id="filter-all" type="button" class="btn active">All</button>
        <button id="filter-available" type="button" class="btn">Available</button>
      </div>
      <h4>Legend</h4>
      <dl>
        <dt class="exec implemented">Name</dt>
        <dd>Implemented method</dd>
        <dt class="exec">Name</dt>
        <dd>Unimplemented method</dd>
        <dt class="exec wont">Name</dt>
        <dd>Module/method which won't be ported</dd>
        <dt class="exec implemented">Name <i class="icon-heart"></i></dt>
        <dd>Method is also available at the root, i.e. <code>jsnx.Name</code></dd>
      </dl>
    </div>
  </div>
  <div class="span9">
    <section>
    <div id="api" class="accordion"></div>
    </section>
  </div>
</div>

<script src="https://raw.github.com/fkling/JSNetworkX/master/jsnetworkx.js"></script>
<script src="javascripts/wont_implement.js"></script>
<script src="javascripts/gradients.js"></script>
<script>
  var elements = {};
  $('#filter').on('click', 'button', function() {
    if (this.id === 'filter-all') {
      $('#api .hide').removeClass('hide');
    }
    else {
      $('#api .exec:not(.implemented)').addClass('hide');
      $('#api .module').not(function() {
        return $(this).find('.exec.implemented').length !== 0;
      }).addClass('hide');
    }
  });

  $.getJSON('networkx_api.json', function(api) {
    $.each(api.modules.slice(1), function(i, m) {
      genererate_output(m.replace('networkx', 'jsnx'));
    });

    $.each(api.types, function(i, t) {
      var m = t[0].replace('networkx', 'jsnx');
      var n = t[1].replace('NetworkX', 'JSNetworkX');
      var e = exists(m, n);
      var ele = $('<div />', {
        'class': 'exec type' + (e ? ' implemented' : ''),
        text: n
      }).appendTo(elements[m]);
      if (t[2]) {
        ele.clone()
        .toggleClass('implemented', exists('', n))
        .appendTo(elements['jsnx']);
        ele.append('&nbsp;<i class="icon-heart"></i>');
      }
    });
    $.each(api.functions, function(i, t) {
      var m = t[0].replace('networkx', 'jsnx');
      var e = exists(m, t[1]);
      var ele = $('<div />', {
        'class': 'exec' + (e ? ' implemented' : ''),
        html: t[1]
      }).appendTo(elements[m]);
      ele.toggleClass('wont', (wont_implement.indexOf([m, t[1]].join('.')) > -1 ? ' wont' : '') || ele.closest('.wont').length === 1);
      if (t[2]) {
        ele.clone()
        .toggleClass('implemented', exists('', t[1]))
        .appendTo(elements['jsnx']);
        ele.append('&nbsp;<i class="icon-heart"></i>');
      }
    });

    var color = d3.scale.linear()
      .domain([0, 50, 100]).range(['#FFAAAA', '#FFFDAA', '#AAFFAA']);

    $.each(elements, function(n, $ele) {
      if ($(this).closest('.wont').length > 0) {
        return;
      }
      var $exec = $ele.find('.exec').filter(function() {
        return $(this).closest('.wont').length === 0;
      });
      var total = $exec.length;
      var impl = $exec.filter('.implemented').length;
      var p = Math.floor(impl / total * 100);
      var $header = $ele.parent().prev();
      var bc = color(p);
      $header.css('background', 'linear-gradient(to right, ' + bc + ', ' + bc + ' ' +  p + '%, #FFFFFF ' + p + '%, #FFFFFF)');
      $header.css('background', 'linear-gradient(left, ' + bc + ', ' + bc + ' ' +  p/2 + '%, #FFFFFF ' + p + '%, #FFFFFF)');
      if (n !== 'jsnx' && $ele.children('.exec.implemented').length > 0) {
        $header.children('span')
        .append('&nbsp;&nbsp;')
        .append($('<a />', {
          href:'https://github.com/fkling/JSNetworkX/tree/master/' + n.replace(/\./g,'/') + '.js',
          html: '&rarr; file',
          on: {
            click: function(e) {
              e.stopPropagation();
            }
          }
        }));
      }
      $header.children('span').append($('<span />',{
        text: ' ' + p + '% ported',
        'class': 'impl_info'
      }));
    });
  });

  function exists(m, n) {
    var parts = m.split('.').slice(1);
    m = jsnx;
    while (parts.length && (m = m[parts.shift()]));
    return !!(m && n in m);
  }

  function genererate_output(m) {
    var top = m.lastIndexOf('.') === -1;
    if (!top) {
      var parent = m.substr(0, m.lastIndexOf('.'));
      if (!(parent in elements) ) {
        genererate_output(parent);
      }
    }
    var cm = m.replace(/\./g, '_');
    var $ele = $('<div />', {
      'class': 'module accordion-group' + (wont_implement.indexOf(m) > -1 ? ' wont' : '')
    });
    var $header = $('<div />', {
      'class': 'accordion-heading',
      'html': '<span class="accordion-toggle" data-target="#' + cm + '_body' + '" data-toggle="collapse">' + m.substring(m.lastIndexOf('.') + 1)+ '<\/span>'
      }).appendTo($ele);
      var $body = $('<div />', {'class': 'accordion-inner'}).appendTo(
        $('<div />', {
          'class': 'accordion-body collapse accordion' + (top ? ' in' : ''),
          id: cm + '_body'}
        ).appendTo($ele)
        );

        elements[m] = $body;
        $ele.appendTo(top ? '#api' : elements[parent]);
      }
    </script>
